{"version":3,"sources":["decorators/command.ts"],"names":[],"mappings":";;;AAAA,gCAAuD;AAavD,SAAgB,SAAS,CAAC,KAAU;IAChC,IAAI,KAAK,CAAC,KAAK,IAAI,KAAK,CAAC,KAAK,EAAE,KAAK,UAAU,EAAE;QAC7C,SAAE,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC1B,OAAO,KAAK,CAAC;KAChB;IACD,OAAO,SAAS,OAAO,CAAkC,MAAS;QAC9D,SAAE,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAC3B,OAAO,MAAM,CAAC;IAClB,CAAC,CAAC;AACN,CAAC;AATD,8BASC;AAED,SAAgB,aAAa,CAAC,MAAuB;IACjD,OAAO,SAAS,OAAO,CAAkC,MAAS;QAC9D,SAAE,CAAC,SAAS,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QAC7B,OAAO,MAAM,CAAC;IAClB,CAAC,CAAC;AACN,CAAC;AALD,sCAKC;AAED;IAAyC,sCAAa;IAqBlD,oBAAY,GAAM;QAAlB,YACI,iBAAO,SAEV;QADG,KAAI,CAAC,GAAG,GAAG,GAAG,CAAC;;IACnB,CAAC;IAtBD,sBAAW,6BAAK;aAAhB;YACI,OAAO,UAAU,CAAC;QACtB,CAAC;;;OAAA;IACa,gBAAK,GAAnB;QACI,OAAO,UAAU,CAAC;IACtB,CAAC;IAkBL,iBAAC;AAAD,CAzBA,AAyBC,CAzBwC,oBAAa,GAyBrD;AAzBY,gCAAU","file":"../../decorators/command.js","sourcesContent":["import { CommanderCore, CoreClass, DI } from '../core';\nimport { textSync, Options } from 'figlet';\n\nexport type ContextRT = string | Promise<string>;\n\n// tslint:disable-next-line:interface-name\nexport interface CommanderOption extends Options {\n    context: ContextRT | ((...props: any[]) => ContextRT);\n    version: ContextRT | ((...props: any[]) => ContextRT);\n}\n\nexport function Commander<Y extends CoreClass<YCommander>>(target: Y): Y;\nexport function Commander(config: CommanderOption): <Y extends CoreClass<YCommander>>(target: Y) => Y;\nexport function Commander(props: any) {\n    if (props._root && props._root() === YCommander) {\n        DI.commanders.push(props);\n        return props;\n    }\n    return function warpper<Y extends CoreClass<YCommander>>(target: Y) {\n        DI.commanders.push(target);\n        return target;\n    };\n}\n\nexport function BootCommander(config: CommanderOption) {\n    return function warpper<Y extends CoreClass<YCommander>>(target: Y) {\n        DI.bootstrap(config, target);\n        return target;\n    };\n}\n\nexport class YCommander<T = any> extends CommanderCore {\n\n    public get _root() {\n        return YCommander;\n    }\n    public static _root() {\n        return YCommander;\n    }\n\n    public actions!: Array<{\n        action: (...props: any[]) => any;\n        description: string; name: string;\n        children?: boolean;\n    }>;\n    public options!: { [key: string]: { description: string; required: boolean; } };\n\n    public readonly action!: (...props: any[]) => any;\n\n    protected ctx: T;\n\n    constructor(...props: any[]);\n    constructor(ctx: T) {\n        super();\n        this.ctx = ctx;\n    }\n}\n"]}